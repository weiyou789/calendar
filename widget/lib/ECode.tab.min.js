;var ECode=ECode||{};ECode.tab=function(){var version="1.0 Dev";var _d={object:null,start:0,event:"click",delay:200,selected:".selected",callback:$.noop};if(arguments.length<1||!(arguments[0]instanceof jQuery)){return $.error("ECode.tab: 第一个参数必须为jQuery选择器匹配的对象");}
var _t=_d.object=arguments[0];for(var i=1;i<arguments.length;i++){var a=arguments[i];var startFlag=false;switch(a.constructor){case Object:$.extend(_d,a);break;case Number:if(!startFlag&&a<100){_d.start=a;startFlag=true;}else if(a>100){_d.delay=a;}
break;case Function:_d.callback=a;break;case String:if(a.charAt(0)=='.'){_d.selected=a;}else if(a.match(/^click|mouseover|mousedown|mouseup|dblclick|mouseenter|mouseleave|mouseout$/)){_d.event=a;}else if(a.charAt(0)=='#'){_d.start=a;}
break;}}
var _tab=function(tab,setting){var aList=[];var idList=[];var timer=null;$(tab).find("[rel='ECode-tab']").first().find("a[rel]").each(function(){var _this=$(this);var _rel=_this.attr("rel");var _href=_this.attr("href");if(!_href){_this.attr("href","javascript:;")}
if(_rel&&_rel.match(/^#.*/)){aList.push(_this);var _id="#"+_rel.split('#')[1];idList.push(_id);$(_id).hide();}});if(aList.length==0){return false;}
var _s=setting.start;var _c=setting.selected.split('.')[1];var _r=function(i,c,d){var _rc=function(){var id;$(idList).each(function(){$(this.toString()).hide();});$(aList).each(function(){$(this).removeClass(c);});if(typeof(i)=='number'&&i<idList.length){$(aList[i]).addClass(c);$(idList[i]).show();id=idList[i].split('#')[1];}else if(typeof i=='string'){_t.find("a[rel='"+i+"']").addClass(c);$(i).show();id=i.split('#')[1];}
setting.callback.apply(this,[id]);}
if(d){clearTimeout(timer);timer=setTimeout(function(){_rc()},setting.delay);}else{_rc();}}
if(typeof(_s)=='number'&&_s>=0&&_s<=aList.length){_r(_s,_c,false);}else if(typeof(setting.start)=='string'){_r(_s,_c,false);}
$(aList).each(function(i){$(this).bind(setting.event,function(){var _h=$(this).attr("rel");var isDelay=(setting.event.match(/^click|mousedown|mouseup|dblclick$/))?false:true;_r(_h,_c,isDelay);return false;});});}
_t.each(function(){_tab($(this),_d);});};